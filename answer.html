<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>BCTA í‰ê°€ í˜ì´ì§€</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="chat-box">
    <h2>ğŸ“ BCTA í‰ê°€ ì§„í–‰</h2>
    <div id="chatArea"></div>

    <div id="inputBox">
      <input type="text" id="userInput" placeholder="ì—¬ê¸°ì— ë‹µë³€ì„ ì…ë ¥í•˜ì„¸ìš”">
      <button id="submitBtn">ì œì¶œ</button>
    </div>
  </div>

  <script>
  const questions = JSON.parse(localStorage.getItem("bcta_questions") || "[]");
  let current = 0;
  const answers = [];

  const chatArea = document.getElementById("chatArea");
  const userInput = document.getElementById("userInput");
  const submitBtn = document.getElementById("submitBtn");

  function showQuestion(index) {
    const q = questions[index];
    if (!q) {
      chatArea.innerHTML += `<div class="message"><div class="question">âœ… ëª¨ë“  ì§ˆë¬¸ì— ë‹µë³€í•˜ì…¨ìŠµë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤!</div></div>`;
      document.getElementById("inputBox").style.display = "none";
      console.log("ğŸ§  ìµœì¢… ë‹µë³€ ê²°ê³¼:", answers);
      return;
    }

    const tagHTML = `
      <div class="tags">
        <span><strong>ì£¼ì œ:</strong> ${q.tags.ì£¼ì œ}</span> |
        <span><strong>ì‚¬ê³ ê¸°ëŠ¥:</strong> ${q.tags.ì‚¬ê³ ê¸°ëŠ¥}</span> |
        <span><strong>ì •ì„œ:</strong> ${q.tags.ì •ì„œ}</span>
      </div>`;

    const questionHTML = `
      <div class="message">
        <div class="question">
          <strong>ì§ˆë¬¸ ${index + 1}</strong><br>
          ${q.question}
          ${tagHTML}
        </div>
      </div>`;

    chatArea.innerHTML += questionHTML;
    userInput.value = "";
    userInput.focus();
    chatArea.scrollTop = chatArea.scrollHeight;
  }

  submitBtn.onclick = () => {
    const answer = userInput.value.trim();
    if (answer === "") return;

    answers.push({
      question: questions[current].question,
      type: questions[current].type,
      tags: questions[current].tags,
      answer: answer
    });

    const answerHTML = `
      <div class="message">
        <div class="answer">${answer}</div>
      </div>`;
    chatArea.innerHTML += answerHTML;
    current++;
    showQuestion(current);
  };

  window.onload = () => {
    showQuestion(current);
  };
</script>
</body>
</html>
