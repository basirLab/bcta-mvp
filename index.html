<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>BCTA ì§ˆë¬¸ ì‹œì‘</title>
</head>
<body>
  <h1>ğŸ§  BCTA ì§ˆë¬¸ ì‹œì‘</h1>

  <label for="target">ëŒ€ìƒ ì„ íƒ:</label>
  <select id="target">
    <option>ì´ˆë“±í•™ìƒ</option>
    <option>ì¤‘í•™ìƒ</option>
    <option>ê³ ë“±í•™ìƒ</option>
    <option>ëŒ€í•™ìƒ</option>
    <option>ì§ì¥ì¸</option>
  </select><br><br>

  <label for="evaluation">í‰ê°€ìœ í˜• ì„ íƒ:</label>
  <select id="evaluation">
    <option value="CT">CT - ë¹„íŒì  ì‚¬ê³ </option>
    <option value="AT">AT - ë…¼ì¦ì  ì‚¬ê³ </option>
    <option value="QT">QT - ì§ˆë¬¸ ìƒì„±</option>
    <option value="DT">DT - ëŒ€í™” ê¸°ë°˜</option>
  </select><br><br>

  <button onclick="startTest()">ì‹œì‘í•˜ê¸°</button>

  <script>
    async function startTest() {
      const target = document.getElementById("target").value;
      const evaluation = document.getElementById("evaluation").value;

      // ì„ íƒ ì •ë³´ ì €ì¥
      localStorage.setItem("target", target);
      localStorage.setItem("evaluationType", evaluation);

      // ì²« ì§ˆë¬¸ë§Œ ìš”ì²­
      const res = await fetch('/api/generate-question', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({
          target: target,
          evaluation: evaluation,
          index: 1
        })
      });

      const data = await res.json();
      if (!data || !data.question) {
        alert("ì§ˆë¬¸ ìƒì„± ì‹¤íŒ¨. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
        return;
      }

      // ì§ˆë¬¸ ì €ì¥
      localStorage.setItem("question_1", JSON.stringify(data.question));

      // í‰ê°€ ì‹œì‘ í˜ì´ì§€ë¡œ ì´ë™
      window.location.href = "answer.html";
    }
  </script>
</body>
</html>
